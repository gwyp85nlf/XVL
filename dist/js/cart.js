"use strict";setCart();var oBox=$(".container")[0];function setCart(){var n,e,t=JSON.parse(localStorage.getItem("cart")),o=0,a=0,c=0;null===t||0===t.length?$(".container").html("<h1>您的购物车以清空</h1>"):(n=!0,t.forEach(function(t){!1===t.buy&&(n=!1)}),e='\n<div class="panel panel-info ">\n  <div class="panel-body bg-info">\n    <div class="checkbox">\n      <label>\n        <input type="checkbox" name="all" '.concat(n?"checked":"",'> 全选\n      </label>\n    \n      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n\n      <button name="not" class="del btn btn-danger">反选</button>\n    </div>\n  </div>\n  <div class="panel-footer">\n    <ul class="cart-list">\n'),t.forEach(function(t){t.buy&&(o++,a+=t.num,c+=t.num*t.goods_price),e+='\n  <li class="cart-item">\n    <div class="left">\n      <input name="other" type="checkbox" goods_id='.concat(t.goods_id,"  ").concat(t.buy?"checked":"",'>\n    </div>\n    <div class="right">\n      <div class="media">\n        <div class="media-left">\n          <a href="#">\n            <img class="media-object" src="').concat(t.goods_small_logo,'" alt="...">\n          </a>\n        </div>\n        <div class="media-body">\n          <h4 class="media-heading">').concat(t.goods_name,'</h4>\n          <p>\n            <i class="glyphicon glyphicon-yen"></i>\n            <span>').concat(t.goods_price,'</span>\n          </p>\n          <div class="btn-group pull-right" role="group" aria-label="...">\n            <button type="button" class="btn btn-default" name="-" goods_id=').concat(t.goods_id," ").concat(1==t.num?"disabled":"",'>-</button>\n            <button type="button" class="btn btn-default" disabled>').concat(t.num,'</button>\n            <button type="button" class="btn btn-default" name="+" goods_id=').concat(t.goods_id," ").concat(t.num==t.goods_number?"disabled":"",">+</button>\n          </div>\n          <button goods_id=").concat(t.goods_id,' name="del" class="del btn btn-danger">我不要了</button>\n\n        </div>\n      </div>\n    </div>\n  </li>\n')}),e+="\n</ul>\n</div>\n  </div>\n\n  <div>\n    <h1>您一共 购买了 ".concat(o," 种 ").concat(a," 件 商品 </h1>\n    <h1>您一共 需要支付 ").concat(c.toFixed(2),"元 </h1>\n  </div>\n"),$(".container").html(e))}oBox.addEventListener("click",function(n){var e,o,a,c,i=JSON.parse(localStorage.getItem("cart"));"all"===n.target.getAttribute("name")&&i.forEach(function(t){t.buy=n.target.checked}),"not"===n.target.getAttribute("name")&&i.forEach(function(t){t.buy=!t.buy}),"other"===n.target.getAttribute("name")&&(e=n.target.getAttribute("goods_id"),i.forEach(function(t){t.goods_id===e&&(t.buy=n.target.checked)})),"del"===n.target.getAttribute("name")&&(o=n.target.getAttribute("goods_id"),i.forEach(function(t,n){t.goods_id===o&&i.splice(n,1)})),"+"===n.target.getAttribute("name")&&(a=n.target.getAttribute("goods_id"),i.forEach(function(t,n){t.goods_id===a&&t.num++})),"-"===n.target.getAttribute("name")&&(c=n.target.getAttribute("goods_id"),i.forEach(function(t,n){t.goods_id===c&&t.num--})),localStorage.setItem("cart",JSON.stringify(i)),setCart()});